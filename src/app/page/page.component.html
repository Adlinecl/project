<nz-layout class="ant-layout">
    <nz-header class="head" style="display:flex;justify-content: space-between">
        <div class="title" style="color: #ffffff">
            库存管理系统
        </div>
        <div class="login-user">
            <div class="news">
                <!-- <nz-badge [nzCount]="5" style="margin-right: 24px;"> -->
                <!-- <img src="/assets/images/news.png"> -->
                <!-- </nz-badge> -->
            </div>
            <div class="user-info">
                <!-- <p><img src="/assets/images/user.png"></p> -->
                <!-- <i nz-icon [nzType]="'caret-down'"></i> -->
                <p>欢迎:&nbsp;&nbsp;{{name}}</p>
            </div>
            <!-- <div>
        <p style="cursor: pointer;" (click)="addRole()">添加角色</p>
      </div>
      <div *ngIf="isrole"  style="width: 200px;height: 30px;line-height: 30px; z-index: 100;">
        role: <input type="text" style="color: black" [(ngModel)]="roleParams.roleName">
        <br>
        <nz-select class="common-select"  style="width: 200px;height: 30px;" [(ngModel)]="roleParams.permissionId" nzAllowClear>
            <nz-option
                *ngFor="let option of selectPermissions"
                [nzLabel]="option.text"
                [nzValue]="option.id"
                >
            </nz-option>
        </nz-select>
        <button (click)="newRole()">newRoles</button>
    </div> -->
            <!-- &nbsp;&nbsp;&nbsp;
      <div>
        <p style="cursor: pointer;" (click)="waring()">库存预警（小于等于10）</p>
      </div>
      <div *ngIf="isshow"  style="width: 200px;height: 30px;line-height: 30px; z-index: 100;">
        <input type="text" style="color: black">
        <button (click)="newwaring()">确定</button>
      </div> -->
            &nbsp;&nbsp;&nbsp;
            <div class="use" style="z-index: 199; position: relative">
                <p style="cursor: pointer;" (click)="using()">操作</p>
                <ul style="z-index: 199; color: black" *ngIf="isshow">
                    <li style="cursor: pointer;" (click)="loginOut()">退出</li>
                    <li style="cursor: pointer;" (click)="changePassword()">修改密码
                    </li>
                </ul>
                <ul *ngIf="isword" style="z-index: 299; background: #ffffff">
                    <li>原密码
                        <input type="text" [(ngModel)]="ordPws">
                    </li>
                    <li>新密码
                        <input type="text" [(ngModel)]="newPws">
                    </li>
                    <li>确认新密码
                        <input type="text" style="margin-right: 10px;" [(ngModel)]="pws">
                    </li>
                    <div>
                        <button nz-button nzType="primary" style="margin-right: 10px;" (click)="confirm()">确认</button>
                        <button nz-button nzType="default" (click)="cancel()">取消</button>
                    </div>
                </ul>
            </div>
        </div>
    </nz-header>
    <nz-layout>
        <nz-sider class="side" [nzWidth]="160">
            <ul nz-menu [nzMode]="'inline'" nzTheme='light'>
                <li nz-menu-item [routerLink]="['/page/role']" routerLinkActive="ant-menu-item-selected">
                    <span title>
                        <!-- <img src="../../assets/images/site.png" alt="现场踏勘"> -->
                        <span class="changeMargin">基本信息管理</span>
                    </span>
                </li>
                <li nz-menu-item [routerLink]="['/page/repertory']" routerLinkActive="ant-menu-item-selected">
                    <span title>
                        <!-- <img src="../../assets/images/plane.png" alt="采样方案"> -->
                        <span class="changeMargin">库存管理</span>
                    </span>
                </li>
                <li nz-menu-item [routerLink]="['/page/sales']" routerLinkActive="ant-menu-item-selected">
                    <span title>
                        <!-- <img src="../../assets/images/write.png" alt="记录采样"> -->
                        <span class="changeMargin">订单管理</span>
                    </span>
                </li>
                <li nz-menu-item [routerLink]="['/page/goods']" routerLinkActive="ant-menu-item-selected">
                    <span title>
                        <!-- <img src="../../assets/images/write.png" alt="记录采样"> -->
                        <span class="changeMargin">商品销售</span>
                    </span>
                </li>
                <li nz-menu-item [routerLink]="['/page/bill']" routerLinkActive="ant-menu-item-selected">
                    <span title>
                        <!-- <img src="../../assets/images/query.png" alt="记录检测"> -->
                        <span class="changeMargin">账单</span>
                    </span>
                </li>
            </ul>
        </nz-sider>
        <nz-content class="content" style="z-index: 99;">
            <router-outlet></router-outlet>
        </nz-content>
    </nz-layout>
</nz-layout>
<nz-modal class="popup-module" [(nzVisible)]="isVisible" [nzTitle]="title" [nzContent]="modalContent" [nzFooter]="modalFooter"
    (nzOnCancel)="handleCancel()">
    <form nz-form [formGroup]="surveyForm" (ngSubmit)="submitForm()">
        <ng-template #modalTitle>
            {{title}}
        </ng-template>
        <ng-template #modalContent>
            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>原密码</nz-form-label>
                <div>
                    <nz-form-control [nzSpan]="12" nzHasFeedback>
                        <input nz-input type="password" formControlName="ordPws" (ngModelChange)="validateConfirmPassword()" />
                        <nz-form-explain *ngIf="validateForm.get('ordPws')?.dirty && validateForm.get('ordPws')?.hasError('required')">请输入原始密码!</nz-form-explain>
                    </nz-form-control>
                </div>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>新密码</nz-form-label>
                <div>
                    <nz-form-control [nzSpan]="12" nzHasFeedback>
                        <input nz-input type="password" formControlName="newPws" (ngModelChange)="validateConfirmPassword()" />
                        <nz-form-explain *ngIf="validateForm.get('newPws')?.dirty && validateForm.get('newPws')?.hasError('required')">请输入新密码!</nz-form-explain>
                    </nz-form-control>
                </div>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>确认新密码</nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback>
                    <input nz-input type="password" formControlName="pws" placeholder="确认新密码" />
                    <nz-form-explain *ngIf="validateForm.get('pws')?.dirty && validateForm.get('pws')?.errors">
                        <ng-container *ngIf="validateForm.get('pws')?.hasError('required')">
                            请输入新密码!
                        </ng-container>
                        <ng-container *ngIf="validateForm.get('pws')?.hasError('pws')">
                            新密码不一样,请重新输入!
                        </ng-container>
                    </nz-form-explain>
                </nz-form-control>
            </nz-form-item>
        </ng-template>
        <ng-template #modalFooter>
            <button nz-button nzType="primary" (click)="submitForm()" [nzLoading]="isConfirmLoading">确定</button>
            <button nz-button nzType="default" class="ant-cancel" (click)="handleCancel()">取消</button>
        </ng-template>
    </form>
</nz-modal>
